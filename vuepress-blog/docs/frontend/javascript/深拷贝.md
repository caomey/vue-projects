# 深拷贝

## 1.JSON.parse(JSON.stringify())

先用stringify将目标对象转化成字符串，字符串为基本数据类型，单独开辟空间，再用parse转换成对象

缺点，无法深拷贝函数

## 2.Object.assign()

Object.assign()方法用于将所有可枚举属性的值从一个或多个源对象复制到目标对象。它将返回目标对象。

语法Object.assign(target, ...sources)

参数：

目标对象target

源对象source

如果目标对象中的属性具有相同的键，则属性将被源对象中的属性覆盖。后面的源对象的属性将类似地覆盖前面的源对象的属性。

```js
var obj1 = {
    name: 'jack',
    age: 25
}
var obj2 = {
    name: 'curry'
}
var obj3 = {
    age: 30
}
Object.assign(obj1, obj2, obj3) ;

// { name: 'curry', age: 30 }
console.log(obj1) ;
// 深拷贝对象
var obj1 = {
    a: 1,
    b: 2,
    c: 'usa'
}
targetObj = {} ;
var target = Object.assign(targetObj, obj1) ;

// { a: 1, b: 2, c: 'usa' }
console.log(targetObj)
// true
console.log(targetObj === target) ;
```

返回值是目标对象，第一个目标对象会被改变，不想改变目标对象，可以使用{}开头

```js
Object.assign({},a,b)
```

## 3.递归拷贝

```js
//对象类型
function deepCopy(obj){
    var a = obj instanceof Array ? [] : {} //判断对象是数组还是对象，{}会把数组转化成对现象
    for (i in obj){
        if(typeof obj[i] == 'object'){ //如果对象里还有对象，进行递归
            a[i] = deepCopy(obj[i])
        }else{
            a[i] = obj[i] //否则直接拷贝
        }
    }
    return a
}
//复杂类型
function clone(obj){
    var a = null,
    if(typeof obj == 'object' && obj != null){
        a = obj instanceof Array ? [] : {}
        for(var i in obj){ 
            a[i] = clone(obj[i])
        }else{
            a = obj //为null时，返回null
        }
    }
    return a
}
```

## 4.lodash深拷贝deepClone

```js
import _ from 'lodash'
_.deepClone(obj)
```

